{"ast":null,"code":"import _asyncToGenerator from\"/Users/davidbroida/Desktop/MusicMatch2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/davidbroida/Desktop/MusicMatch2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/davidbroida/Desktop/MusicMatch2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _regeneratorRuntime from\"/Users/davidbroida/Desktop/MusicMatch2/frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';var BASE_URL=process.env.REACT_APP_BASE_URL||'http://localhost:5000';var MusicMatchApi=/*#__PURE__*/function(){function MusicMatchApi(){_classCallCheck(this,MusicMatchApi);}_createClass(MusicMatchApi,null,[{key:\"request\",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoint){var data,method,url,headers,params,message,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>1&&_args[1]!==undefined?_args[1]:{};method=_args.length>2&&_args[2]!==undefined?_args[2]:'get';// console.debug('API Call:', endpoint, data, method);\nurl=\"\".concat(BASE_URL,\"/\").concat(endpoint);headers={Authorization:\"Bearer \".concat(MusicMatchApi.token)};params=method==='get'?data:{};_context.prev=5;_context.next=8;return axios({url:url,method:method,data:data,params:params,headers:headers});case 8:return _context.abrupt(\"return\",_context.sent.data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);console.error('API Error:',_context.t0.response);message=_context.t0.response.data.error.message;throw Array.isArray(message)?message:[message];case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,11]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()},{key:\"signup\",value:function(){var _signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request(\"auth/register\",data,'post');case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.token);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function signup(_x2){return _signup.apply(this,arguments);}return signup;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request(\"auth/token\",data,'post');case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.token);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function login(_x3){return _login.apply(this,arguments);}return login;}()},{key:\"getCurrentUser\",value:function(){var _getCurrentUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(username){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:res=this.request(\"users/\".concat(username));return _context4.abrupt(\"return\",res.user);case 2:case\"end\":return _context4.stop();}}},_callee4,this);}));function getCurrentUser(_x4){return _getCurrentUser.apply(this,arguments);}return getCurrentUser;}()},{key:\"saveProfile\",value:function(){var _saveProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username,data){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request(\"users/\".concat(username),data,'patch');case 2:res=_context5.sent;return _context5.abrupt(\"return\",res.user);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function saveProfile(_x5,_x6){return _saveProfile.apply(this,arguments);}return saveProfile;}()}]);return MusicMatchApi;}();export default MusicMatchApi;","map":{"version":3,"sources":["/Users/davidbroida/Desktop/MusicMatch2/frontend/src/api/api.js"],"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","MusicMatchApi","endpoint","data","method","url","headers","Authorization","token","params","console","error","response","message","Array","isArray","request","res","username","user"],"mappings":"qhBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,EAAkC,uBAAnD,C,GAEMC,CAAAA,a,6NAIJ,iBAAqBC,QAArB,6KAA+BC,IAA/B,+CAAsC,EAAtC,CAA0CC,MAA1C,+CAAmD,KAAnD,CACE;AAEMC,GAHR,WAGiBR,QAHjB,aAG6BK,QAH7B,EAIQI,OAJR,CAIkB,CAAEC,aAAa,kBAAYN,aAAa,CAACO,KAA1B,CAAf,CAJlB,CAKQC,MALR,CAKiBL,MAAM,GAAK,KAAX,CAAmBD,IAAnB,CAA0B,EAL3C,uCAQkBP,CAAAA,KAAK,CAAC,CAAES,GAAG,CAAHA,GAAF,CAAOD,MAAM,CAANA,MAAP,CAAeD,IAAI,CAAJA,IAAf,CAAqBM,MAAM,CAANA,MAArB,CAA6BH,OAAO,CAAPA,OAA7B,CAAD,CARvB,sDAQiEH,IARjE,4DAUIO,OAAO,CAACC,KAAR,CAAc,YAAd,CAA4B,YAAIC,QAAhC,EACIC,OAXR,CAWkB,YAAID,QAAJ,CAAaT,IAAb,CAAkBQ,KAAlB,CAAwBE,OAX1C,MAYUC,CAAAA,KAAK,CAACC,OAAN,CAAcF,OAAd,EAAyBA,OAAzB,CAAmC,CAACA,OAAD,CAZ7C,sE,sLAgBA,kBAAoBV,IAApB,qJACkB,MAAKa,OAAL,iBAA8Bb,IAA9B,CAAoC,MAApC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACT,KAFb,+D,kLAKA,kBAAmBL,IAAnB,qJACkB,MAAKa,OAAL,cAA2Bb,IAA3B,CAAiC,MAAjC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACT,KAFb,+D,iMAKA,kBAA4BU,QAA5B,8HACMD,GADN,CACY,KAAKD,OAAL,iBAAsBE,QAAtB,EADZ,kCAESD,GAAG,CAACE,IAFb,+D,sNAKA,kBAAyBD,QAAzB,CAAmCf,IAAnC,qJACkB,MAAKa,OAAL,iBAAsBE,QAAtB,EAAkCf,IAAlC,CAAwC,OAAxC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACE,IAFb,+D,+HAMF,cAAelB,CAAAA,aAAf","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:5000';\n\nclass MusicMatchApi {\n\n  static token;\n\n  static async request(endpoint, data = {}, method = 'get') {\n    // console.debug('API Call:', endpoint, data, method);\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${MusicMatchApi.token}` };\n    const params = method === 'get' ? data : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error('API Error:', err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, 'post');\n    return res.token;\n  }\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, 'post');\n    return res.token;\n  }\n\n  static async getCurrentUser(username) {\n    let res = this.request(`users/${username}`);\n    return res.user;\n  }\n\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, 'patch');\n    return res.user;\n  }\n}\n\nexport default MusicMatchApi;\n"]},"metadata":{},"sourceType":"module"}