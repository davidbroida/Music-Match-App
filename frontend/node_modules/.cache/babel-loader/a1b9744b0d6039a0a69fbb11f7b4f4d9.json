{"ast":null,"code":"import axios from 'axios';\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:5000';\n\nclass MusicMatchApi {\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'get';\n    // console.debug('API Call:', endpoint, data, method);\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${MusicMatchApi.token}`\n    };\n    const params = method === 'get' ? data : {};\n\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error('API Error:', err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, 'post');\n    return res.token;\n  }\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, 'post');\n    return res.token;\n  }\n\n  static async getCurrentUser(username) {\n    let res = this.request(`users/${username}`); // console.log(res);\n\n    return res.user;\n  }\n\n}\n\nexport default MusicMatchApi;","map":{"version":3,"sources":["/Users/davidbroida/Desktop/MusicMatch2/frontend/src/api/api.js"],"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","MusicMatchApi","request","endpoint","data","method","url","headers","Authorization","token","params","err","console","error","response","message","Array","isArray","signup","res","login","getCurrentUser","username","user"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,IAAkC,uBAAnD;;AAEA,MAAMC,aAAN,CAAoB;AAIE,eAAPC,OAAO,CAACC,QAAD,EAAsC;AAAA,QAA3BC,IAA2B,uEAApB,EAAoB;AAAA,QAAhBC,MAAgB,uEAAP,KAAO;AACxD;AAEA,UAAMC,GAAG,GAAI,GAAET,QAAS,IAAGM,QAAS,EAApC;AACA,UAAMI,OAAO,GAAG;AAAEC,MAAAA,aAAa,EAAG,UAASP,aAAa,CAACQ,KAAM;AAA/C,KAAhB;AACA,UAAMC,MAAM,GAAGL,MAAM,KAAK,KAAX,GAAmBD,IAAnB,GAA0B,EAAzC;;AAEA,QAAI;AACF,aAAO,CAAC,MAAMR,KAAK,CAAC;AAAEU,QAAAA,GAAF;AAAOD,QAAAA,MAAP;AAAeD,QAAAA,IAAf;AAAqBM,QAAAA,MAArB;AAA6BH,QAAAA;AAA7B,OAAD,CAAZ,EAAsDH,IAA7D;AACD,KAFD,CAEE,OAAOO,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAc,YAAd,EAA4BF,GAAG,CAACG,QAAhC;AACA,UAAIC,OAAO,GAAGJ,GAAG,CAACG,QAAJ,CAAaV,IAAb,CAAkBS,KAAlB,CAAwBE,OAAtC;AACA,YAAMC,KAAK,CAACC,OAAN,CAAcF,OAAd,IAAyBA,OAAzB,GAAmC,CAACA,OAAD,CAAzC;AACD;AACF;;AAEkB,eAANG,MAAM,CAACd,IAAD,EAAO;AACxB,QAAIe,GAAG,GAAG,MAAM,KAAKjB,OAAL,CAAc,eAAd,EAA8BE,IAA9B,EAAoC,MAApC,CAAhB;AACA,WAAOe,GAAG,CAACV,KAAX;AACD;;AAEiB,eAALW,KAAK,CAAChB,IAAD,EAAO;AACvB,QAAIe,GAAG,GAAG,MAAM,KAAKjB,OAAL,CAAc,YAAd,EAA2BE,IAA3B,EAAiC,MAAjC,CAAhB;AACA,WAAOe,GAAG,CAACV,KAAX;AACD;;AAE0B,eAAdY,cAAc,CAACC,QAAD,EAAW;AACpC,QAAIH,GAAG,GAAG,KAAKjB,OAAL,CAAc,SAAQoB,QAAS,EAA/B,CAAV,CADoC,CAEpC;;AACA,WAAOH,GAAG,CAACI,IAAX;AACD;;AAlCiB;;AAqCpB,eAAetB,aAAf","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || 'http://localhost:5000';\n\nclass MusicMatchApi {\n\n  static token;\n\n  static async request(endpoint, data = {}, method = 'get') {\n    // console.debug('API Call:', endpoint, data, method);\n\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${MusicMatchApi.token}` };\n    const params = method === 'get' ? data : {};\n\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error('API Error:', err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, 'post');\n    return res.token;\n  }\n\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, 'post');\n    return res.token;\n  }\n\n  static async getCurrentUser(username) {\n    let res = this.request(`users/${username}`);\n    // console.log(res);\n    return res.user;\n  }\n}\n\nexport default MusicMatchApi;\n"]},"metadata":{},"sourceType":"module"}