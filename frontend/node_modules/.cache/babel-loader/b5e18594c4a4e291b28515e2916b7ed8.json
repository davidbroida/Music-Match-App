{"ast":null,"code":"import _slicedToArray from\"/Users/davidbroida/Desktop/MusicMatch2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import useAuth from'../hooks/useAuth';import SpotifyWebApi from'spotify-web-api-node';import Playlist from'./Playlist';import NewReleases from'./NewReleases';import{Container}from'react-bootstrap';import Player from'./Player';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SpotifyApi=new SpotifyWebApi({clientId:'04306bc8614e44bbb0f6f8071bb81e01'});function Dashboard(){var code=localStorage.getItem('code');var accessToken=useAuth(code);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),playlists=_useState2[0],setPlaylists=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),playingSong=_useState4[0],setPlayingSong=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),newReleases=_useState6[0],setNewReleases=_useState6[1];function choosePlaylist(playlist){setPlayingSong(playlist);}function chooseNewRelease(album){setPlayingSong(album);}useEffect(function(){if(!accessToken)return;SpotifyApi.setAccessToken(accessToken);},[accessToken]);useEffect(function(){if(!accessToken)return;SpotifyApi.getNewReleases({limit:26,offset:0,country:'US'}).then(function(res){console.log(res.body);setNewReleases(res.body.albums.items.map(function(album){return{name:album.name,uri:album.uri,albumUrl:album.images[0].url};}));},function(err){console.log(\"Something went wrong!\",err);});},[accessToken]);useEffect(function(){if(!accessToken)return;SpotifyApi.getPlaylistsForCategory('party',{country:'US',limit:20,offset:0}).then(function(res){console.log(res.body);setPlaylists(res.body.playlists.items.map(function(playlist){return{name:playlist.name,description:playlist.description,uri:playlist.uri,albumUrl:playlist.images[0].url};}));},function(err){console.log(\"Something went wrong!\",err);});},[accessToken]);return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"top-row\",children:/*#__PURE__*/_jsx(Container,{className:\"flex-row\",children:playlists.map(function(playlist){return/*#__PURE__*/_jsx(Playlist,{playlist:playlist,choosePlaylist:choosePlaylist},playlist.uri);})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{className:\"flex-row\",children:newReleases.map(function(album){return/*#__PURE__*/_jsx(NewReleases,{album:album,chooseNewRelease:chooseNewRelease},album.uri);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"music-player\",children:/*#__PURE__*/_jsx(Player,{accessToken:accessToken,trackUri:playingSong===null||playingSong===void 0?void 0:playingSong.uri})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{id:\"search-btn\",className:\"btn btn-success btn-lg\",href:\"/search\",children:\"Search Songs & Lyrics\"})})]});}export default Dashboard;","map":{"version":3,"sources":["/Users/davidbroida/Desktop/MusicMatch2/frontend/src/components/Dashboard.js"],"names":["React","useState","useEffect","useAuth","SpotifyWebApi","Playlist","NewReleases","Container","Player","SpotifyApi","clientId","Dashboard","code","localStorage","getItem","accessToken","playlists","setPlaylists","playingSong","setPlayingSong","newReleases","setNewReleases","choosePlaylist","playlist","chooseNewRelease","album","setAccessToken","getNewReleases","limit","offset","country","then","res","console","log","body","albums","items","map","name","uri","albumUrl","images","url","err","getPlaylistsForCategory","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport useAuth from '../hooks/useAuth';\nimport SpotifyWebApi from 'spotify-web-api-node';\nimport Playlist from './Playlist';\nimport NewReleases from './NewReleases';\nimport { Container } from 'react-bootstrap';\nimport Player from './Player';\n\n\n\nconst SpotifyApi = new SpotifyWebApi({\n  clientId: '04306bc8614e44bbb0f6f8071bb81e01',\n})\n\nfunction Dashboard() {\n  const code = localStorage.getItem('code');\n  const accessToken = useAuth(code);\n  const [playlists, setPlaylists] = useState([]);\n  const [playingSong, setPlayingSong] = useState();\n  const [newReleases, setNewReleases] = useState([]);\n\n  function choosePlaylist(playlist) {\n    setPlayingSong(playlist);\n  }\n  function chooseNewRelease(album) {\n    setPlayingSong(album);\n  }\n\n  useEffect(() => {\n    if (!accessToken) return;\n    SpotifyApi.setAccessToken(accessToken)\n  }, [accessToken]);\n\n\n  useEffect(() => {\n    if (!accessToken) return;\n    SpotifyApi.getNewReleases({ limit: 26, offset: 0, country: 'US' })\n      .then(res => {\n        console.log(res.body)\n        setNewReleases(res.body.albums.items.map(album => {\n          return {\n            name: album.name,\n            uri: album.uri,\n            albumUrl: album.images[0].url\n          }\n        }))\n      }, function (err) {\n        console.log(\"Something went wrong!\", err);\n      });\n  }, [accessToken]);\n\n\n  useEffect(() => {\n    if (!accessToken) return;\n    SpotifyApi.getPlaylistsForCategory('party', {\n      country: 'US',\n      limit: 20,\n      offset: 0\n    })\n      .then(res => {\n        console.log(res.body)\n        setPlaylists(res.body.playlists.items.map(playlist => {\n\n          return {\n            name: playlist.name,\n            description: playlist.description,\n            uri: playlist.uri,\n            albumUrl: playlist.images[0].url\n          }\n        }))\n      }, function (err) {\n        console.log(\"Something went wrong!\", err);\n      });\n  }, [accessToken]);\n\n  return (\n    <> <div className=\"top-row\">\n      <Container className=\"flex-row\"   >\n        {playlists.map(playlist => (\n          <Playlist playlist={playlist} key={playlist.uri} choosePlaylist={choosePlaylist} />\n        ))}\n      </Container>\n    </div>\n      <div>\n        <Container className=\"flex-row\"  >\n          {newReleases.map(album => (\n            <NewReleases album={album} key={album.uri} chooseNewRelease={chooseNewRelease} />\n          ))}\n        </Container >\n      </div>\n      <div className=\"music-player\">\n        <Player accessToken={accessToken} trackUri={playingSong?.uri} />\n      </div>\n      <div>\n        <a id=\"search-btn\" className=\"btn btn-success btn-lg\" href=\"/search\">Search Songs & Lyrics</a>\n      </div>\n    </>\n  )\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}